(this.webpackJsonpsoil=this.webpackJsonpsoil||[]).push([[0],{110:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),o=a.n(s),i=(a(110),a(38)),c=a(39),l=a(50),d=a(48),h=a(29),u=a.n(h),g=(a(77),a(53)),p=(a(78),a(156)),j=a(157),b=a(158),x=a(153),y=a(154),m=a(138),f=a(4),O=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={user:e.props,Loading:!1,status:"safe",gdpLevel:0,statusBar:null,location:null,currentReports:[],currentWeatherReports:[]},e}return Object(c.a)(a,[{key:"getData",value:function(e){var t=this;u.a.get("https://3.137.214.252:80/weather/"+e).then((function(e){e.data?t.setState({currentReports:e.data}):console.log("no")}))}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}},{key:"createWeather",value:function(e){var t={user_id:this.props.user.id,date:this.formatDate(new Date),high:e.main.temp_max,low:e.main.temp_min};u.a.post("https://3.137.214.252:80/weather/create",t).then((function(e){e.data?console.log(e):console.log("loser")}))}},{key:"calculateWeather",value:function(){var e=this.state.currentReports,t=0;e.forEach((function(e){var a=t;a+=Math.floor((e.high+e.low)/2),e.fertilized?(e.gdp=Math.floor((e.high+e.low)/2),e.status="rgb(255,255,255)",e.message="Safe",e.color="black",console.log(e)):a>=170?(e.gdp=a,e.status="red",e.message="Action",e.color="white"):a>=120?(e.gdp=a,e.status="rgb(209, 14, 0,0.5)",e.message="Warning",e.color="white"):a>=80?(e.gdp=a,e.status="yellow",e.message="Moderate",e.color="black"):(e.gdp=a,e.status="rgb(123, 237, 47)",e.message="Safe",e.color="black"),t=e.gdp})),this.setState({currentWeatherReports:e})}},{key:"componentDidMount",value:function(){this.getData(this.props.user.id),this.getWeather()}},{key:"getWeather",value:function(){var e=this,t=this.props.user.location,a="http://api.openweathermap.org/data/2.5/weather?q="+t+"&units=metric&appid=86583fb8344f78f0fdf02aa0d9e1859c";u.a.get(a).then((function(a){var n=a.data;e.setState({weather:n,Loading:!1,user:e.props.user,location:t}),e.createWeather(a.data),e.calculateWeather()}))}},{key:"getToday",value:function(){var e=new Date,t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate()<10?"0"+e.getDate():e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],r=e.getFullYear();return(e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+(e.getHours()>12?" pm":" am")+" "+t+" "+a+" "+n+", "+r}},{key:"getDate",value:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(e=new Date(e)).getDay()];return e.getMonth()+1+"/"+(e.getDate()<9?"0"+e.getDate():e.getDate())+" "+t}},{key:"status",value:function(e){var t=e[e.length-1];return console.log("weahter",e),Object(f.jsx)("div",{style:{backgroundColor:t.status,padding:"5px"},children:Object(f.jsx)("h2",{style:{textAlign:"center",color:"black"},children:t.message})})}},{key:"tableBoard",value:function(e){var t=this;return e.map((function(e){return Object(f.jsxs)(p.a.Row,{children:[Object(f.jsx)("td",{children:t.getDate(e.date)}),Object(f.jsx)("td",{children:e.high}),Object(f.jsx)("td",{children:e.low}),Object(f.jsx)("td",{style:{backgroundColor:e.status,color:e.color},children:e.gdp})]},e.date)}))}},{key:"ferterlize",value:function(e){var t=this,a=e[e.length-1].id;u.a.get("http://3.137.214.252/weather/fertilize/"+a).then((function(e){e.data?(console.log("good?"),t.getData(t.props.user.id)):console.log("bad?")}))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{style:{padding:"30px"},children:[Object(f.jsxs)(j.a,{style:{width:"100%",margin:"auto",padding:"10px",maxHeight:"90vh"},children:[Object(f.jsx)(b.a,{active:this.state.Loading,inverted:!0,children:Object(f.jsx)(x.a,{size:"medium",children:"Loading"})}),Object(f.jsxs)(j.a.Header,{children:[Object(f.jsx)("h1",{style:{fontSize:"15px",textAlign:"center"},children:this.getToday()}),this.state.weather&&Object(f.jsxs)("h2",{style:{fontSize:"15px",textAlign:"center"},children:[this.state.weather.main.temp,"\xb0 in ",this.state.location]})]}),Object(f.jsx)(y.a,{style:{marginBottom:"5px"}}),this.state.currentWeatherReports.length>0&&this.status(this.state.currentWeatherReports),Object(f.jsx)(y.a,{style:{marginTop:"5px"}}),Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:Object(f.jsxs)("table",{children:[Object(f.jsxs)(p.a.Row,{children:[Object(f.jsx)("th",{children:"Date"}),Object(f.jsx)("th",{children:"High"}),Object(f.jsx)("th",{children:"Low"}),Object(f.jsx)("th",{children:"GDP"})]}),Object(f.jsx)("tbody",{children:this.state.currentWeatherReports&&this.tableBoard(this.state.currentWeatherReports)})]})}),Object(f.jsxs)(m.a.Group,{style:{width:"100%",padding:"10px",paddingBottom:"0px",marginTop:"2px"},children:[Object(f.jsx)(m.a,{style:{width:"50%"},color:"blue",children:"Fix"}),Object(f.jsx)(m.a,{onClick:function(){return e.ferterlize(e.state.currentWeatherReports)},style:{color:"black",width:"50%"},color:"green",children:"Fertilze"})]})]})]}),Object(f.jsx)("p",{style:{textAlign:"center",color:"white",padding:"5px"},children:Object(f.jsx)("a",{style:{color:"white",opacity:"50%"},href:"mailto:maxjones2001@hotmail.com?subject=Help",children:"Need help?"})})]})}}]),a}(r.a.Component),v=a(155),w=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={users:null,username:null,password:null,status:"No User"},e.handleUsername=e.handleUsername.bind(Object(g.a)(e)),e.handlePassword=e.handlePassword.bind(Object(g.a)(e)),e}return Object(c.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"loginUser",value:function(){var e=this,t={username:this.state.username,password:this.state.password};u.a.post("https://3.137.214.252/users/login",t).then((function(t){t.data?e.setState({status:"Success",user:t.data}):(console.log("no user found"),e.setState({status:"Not Succesful"}))}))}},{key:"loginForm",value:function(){var e=this;return Object(f.jsxs)("div",{style:{padding:"30px"},children:[Object(f.jsxs)(j.a,{style:{margin:"auto",padding:"10px"},children:[Object(f.jsx)(j.a.Header,{children:Object(f.jsx)("h1",{style:{textAlign:"center"},children:"Soil"})}),Object(f.jsx)(y.a,{}),Object(f.jsx)(v.a,{onChange:this.handleUsername,style:{padding:"10px",paddingBottom:"5px",paddingTop:"5px"},placeholder:"Username..."}),Object(f.jsx)(v.a,{onKeyPress:function(t){"Enter"===t.key&&e.loginUser()},type:"password",onChange:this.handlePassword,style:{padding:"10px"},placeholder:"Password..."}),Object(f.jsx)("div",{style:{marginTop:"10px",textAlign:"center"},children:Object(f.jsx)(m.a,{onClick:function(){return e.loginUser()},style:{padding:"10px",width:"50%",margin:"auto"},color:"green",children:"Login"})}),Object(f.jsxs)("p",{style:{textAlign:"center",paddingTop:"10px",opacity:"50%",paddingBottom:"5px"},children:["to recieve an account, click ",Object(f.jsx)("a",{href:"mailto:maxjones2001@hotmail.com?subject=Request soil account",children:"here"}),"."]})]}),Object(f.jsx)("p",{style:{color:"white",textAlign:"center",opacity:"60%",padding:"3px"},children:Object(f.jsx)("a",{rel:"noreferrer",style:{color:"white",textAlign:"center",textDecoration:"none"},href:"https://maxwelljonesdesign.com/",target:"_blank",children:" maxwelljonesdesign.com"})})]})}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[!this.state.user&&this.loginForm(),this.state.user&&Object(f.jsx)(O,{user:this.state.user})]})}}]),a}(r.a.Component),k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(w,{})})}}]),a}(r.a.Component);a(136);o.a.render(Object(f.jsx)(k,{}),document.getElementById("root"))},77:function(e,t,a){}},[[137,1,2]]]);
//# sourceMappingURL=main.d8f2ece1.chunk.js.map