(this.webpackJsonpsoil=this.webpackJsonpsoil||[]).push([[0],{127:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),s=a.n(o),i=(a(127),a(47)),l=a(48),c=a(56),d=a(53),u=a(36),h=a.n(u),p=(a(89),a(60)),g=a(92),j=a.n(g),b=a(110),x=(a(90),a(172)),m=a(45),y=a(173),f=a(175),O=a(168),v=a(169),w=a(156),k=a(171),C=a(170),D=a(177),S=a(2),T=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={user:e.props,Loading:!1,status:"safe",gdpLevel:0,statusBar:null,location:null,currentReports:[],currentWeatherReports:[],modal:!1,modal2:!1,selectedDay:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getWeather()}},{key:"getWeather",value:function(e){var t=this,a=this.props.user.location,n="https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/weather?q="+(a+=", CA")+"&units=metric&appid=86583fb8344f78f0fdf02aa0d9e1859c";h.a.get(n).then((function(e){t.setState({Loading:!1,user:t.props.user,location:a,weather:e.data}),t.getData(t.props.user.id)}))}},{key:"getData",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var a=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.get("https://cors-anywhere.herokuapp.com/http://3.15.10.36/weather/"+t).then((function(e){e.data&&(a.setState({currentReports:e.data}),a.calculateWeather(e.data))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateWeather",value:function(e){console.log(e);var t=0;e.forEach((function(e){var a=t;a+=Math.floor((e.high+e.low)/2),console.log("current gdp",a),e.fertilized?(e.gdp=Math.floor((e.high+e.low)/2),e.status="rgb(205,205,205)",e.message="Safe",e.color="black"):a>=170?(e.gdp=a,e.status="red",e.message="Action",e.color="white"):a>=120?(e.gdp=a,e.status="rgb(209, 14, 0,0.5)",e.message="Warning",e.color="white"):a>=80?(e.gdp=a,e.status="yellow",e.message="Moderate",e.color="black"):(e.gdp=a,e.status="rgb(123, 237, 47)",e.message="Safe",e.color="black"),t=e.gdp})),this.setState({currentWeatherReports:e})}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}},{key:"getToday",value:function(){var e=new Date,t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate()<10?"0"+e.getDate():e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],r=e.getFullYear();return(e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+(e.getHours()>12?" pm":" am")+" "+t+" "+a+" "+n+", "+r}},{key:"getDate",value:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(e=new Date(e)).getUTCDay()];return e.getUTCMonth()+1+"/"+(e.getUTCDate()<9?"0"+e.getUTCDate():e.getUTCDate())+" "+t}},{key:"status",value:function(e){var t=e[e.length-1];return Object(S.jsx)("div",{style:{backgroundColor:t.status,padding:"5px"},children:Object(S.jsx)("h2",{style:{textAlign:"center",color:"black"},children:t.message})})}},{key:"ferterlize",value:function(e){var t=this,a=e[e.length-1].id;h.a.get("https://cors-anywhere.herokuapp.com/http://3.15.10.36/weather/fertilize/"+a).then((function(e){e.data&&t.getData(t.props.user.id)})),this.closeModal()}},{key:"tableBoard",value:function(e){var t=this;return e.map((function(e){return Object(S.jsxs)(x.a.Row,{color:"blue",children:[Object(S.jsx)(x.a.Cell,{id:"tbody",children:t.getDate(e.date)}),Object(S.jsx)(x.a.Cell,{id:"tbody",children:e.high}),Object(S.jsx)(x.a.Cell,{id:"tbody",children:e.low}),Object(S.jsxs)(x.a.Cell,{id:"tbody",style:{backgroundColor:e.status,color:e.color},children:[e.gdp,Object(S.jsx)(m.a,{style:{display:e.fertilized?null:"none"},color:"black",name:"leaf"})]})]},e.date)}))}},{key:"openModal",value:function(){this.setState({modal:!0})}},{key:"closeModal",value:function(){this.setState({modal:!1})}},{key:"openModal2",value:function(){this.setState({modal2:!0})}},{key:"closeModal2",value:function(){this.setState({modal2:!1})}},{key:"logout",value:function(){console.log("logging out"),localStorage.setItem("user",null),this.setState({user:null}),window.location.reload(!0)}},{key:"updateWeatherItem",value:function(e){var t=this;e={id:document.getElementById("idForm").value,high:document.getElementById("highForm").value,low:document.getElementById("lowForm").value,fertilized:document.getElementById("fertForm").checked},h.a.post("https://cors-anywhere.herokuapp.com/http://3.15.10.36/weather/update",e).then((function(e){e.data&&(t.getData(t.props.user.id),t.closeModal2())}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"blur",style:{padding:"30px"},children:[Object(S.jsxs)(y.a,{style:{width:"100%",margin:"auto",padding:"10px",maxHeight:"90vh",maxWidth:"600px"},children:[Object(S.jsx)(f.a,{active:this.state.Loading,inverted:!0,children:Object(S.jsx)(O.a,{size:"medium",children:"Loading"})}),Object(S.jsxs)(y.a.Header,{children:[Object(S.jsx)("h1",{style:{fontSize:"15px",textAlign:"center"},children:this.getToday()}),this.state.weather&&Object(S.jsxs)("h2",{style:{fontSize:"15px",textAlign:"center"},children:[this.state.weather.main.temp,"\xb0 in ",this.state.location]})]}),Object(S.jsx)(v.a,{style:{marginBottom:"5px"}}),this.state.currentWeatherReports.length>0&&this.status(this.state.currentWeatherReports),Object(S.jsx)(v.a,{style:{marginTop:"5px"}}),Object(S.jsxs)("div",{style:{width:"100%"},children:[Object(S.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:Object(S.jsxs)(x.a,{unstackable:!0,children:[Object(S.jsx)(x.a.Header,{color:"blue",children:Object(S.jsxs)(x.a.Row,{children:[Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"Date"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"High"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"Low"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"GDD"})]})}),Object(S.jsx)(x.a.Body,{id:"tbody",children:this.state.currentWeatherReports&&this.tableBoard(this.state.currentWeatherReports)})]})}),Object(S.jsxs)(w.a.Group,{style:{width:"100%",padding:"10px",paddingBottom:"0px",marginTop:"2px"},children:[Object(S.jsx)(w.a,{onClick:function(){return e.openModal2()},style:{width:"50%"},color:"blue",children:"Fix"}),Object(S.jsx)(w.a,{onClick:function(){return e.openModal()},style:{color:"black",width:"50%"},color:"green",children:"Fertilze"})]})]})]}),Object(S.jsx)(k.a,{size:"tiny",id:"modal",style:{width:"300px",height:"120px"},open:this.state.modal,children:Object(S.jsxs)("div",{style:{padding:"20px"},children:["Are you sure?",Object(S.jsxs)(w.a.Group,{style:{width:"100%",paddingTop:"20px"},children:[Object(S.jsx)(w.a,{onClick:function(){return e.ferterlize(e.state.currentWeatherReports)},color:"green",children:"Yes"}),Object(S.jsx)(w.a,{onClick:function(){return e.closeModal()},color:"red",children:"No"})]})]})}),Object(S.jsxs)("div",{style:{margin:"5px",textAlign:"center"},children:[Object(S.jsx)(w.a,{onClick:function(){return e.logout()},style:{margin:"auto",textAlign:"center"},children:"Logout"}),Object(S.jsx)("p",{style:{textAlign:"center",color:"white",padding:"5px"},children:Object(S.jsx)("a",{style:{color:"white",opacity:"50%"},href:"mailto:maxjones2001@hotmail.com?subject=Help",children:"Need help?"})})]}),Object(S.jsx)(k.a,{id:"modal",style:{margin:"auto",width:"100%",height:"50vh"},open:this.state.modal2,children:Object(S.jsxs)("div",{style:{padding:"20px"},children:["Fix an issue",Object(S.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto",paddingTop:"20px"},children:Object(S.jsxs)(x.a,{unstackable:!0,children:[Object(S.jsx)(x.a.Header,{color:"blue",children:Object(S.jsxs)(x.a.Row,{children:[Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"id"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"Date"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"High"}),Object(S.jsx)(x.a.HeaderCell,{id:"thc",children:"Low"})]})}),Object(S.jsx)(x.a.Body,{id:"tbody",children:this.state.currentWeatherReports.map((function(t){return Object(S.jsxs)(x.a.Row,{color:"blue",children:[Object(S.jsx)(x.a.Cell,{id:"tbody",children:t.id}),Object(S.jsx)(x.a.Cell,{id:"tbody",children:e.getDate(t.date)}),Object(S.jsx)(x.a.Cell,{id:"tbody",children:t.high}),Object(S.jsx)(x.a.Cell,{id:"tbody",children:t.low})]},t.date)}))})]})}),Object(S.jsx)(C.a,{id:"idForm",style:{margin:"auto",paddingTop:"10px"},label:"ID"}),Object(S.jsx)(C.a,{id:"highForm",style:{margin:"auto",paddingTop:"10px"},label:"High"}),Object(S.jsx)(C.a,{id:"lowForm",style:{margin:"auto",paddingTop:"10px"},label:"Low"}),Object(S.jsx)(D.a,{id:"fertForm",style:{width:"100%",margin:"auto",paddingTop:"10px",paddingBottom:"20px"},label:"Fertilzed"}),Object(S.jsx)(w.a,{onClick:function(){return e.updateWeatherItem()},children:"Update"}),Object(S.jsx)(w.a,{onClick:function(){return e.closeModal2()},children:"Cancel"})]})})]})}}]),a}(r.a.Component),H=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={users:null,username:null,password:null,status:" "},e.handleUsername=e.handleUsername.bind(Object(p.a)(e)),e.handlePassword=e.handlePassword.bind(Object(p.a)(e)),e}return Object(l.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"loginUser",value:function(){var e=this,t={username:this.state.username,password:this.state.password};h.a.post("https://cors-anywhere.herokuapp.com/http://3.15.10.36/users/login",t).then((function(t){t.data?(localStorage.setItem("user",JSON.stringify(t.data)),e.setState({status:"Success",user:t.data})):(console.log("no user found"),e.setState({status:"Not Succesful"}))}))}},{key:"loginForm",value:function(){var e=this;return Object(S.jsxs)("div",{className:"blur",style:{padding:"30px"},children:[Object(S.jsxs)(y.a,{style:{margin:"auto",padding:"10px",marginTop:"30px",backgroundColor:"rgb(245, 245, 245,0.85)"},children:[Object(S.jsxs)(y.a.Header,{children:[Object(S.jsx)("h1",{style:{textAlign:"center",fontFamily:"Cinzel",marginTop:"10px"},children:"Soil"}),Object(S.jsx)("p",{style:{textAlign:"center",fontSize:"12px"},children:"Sign in to continue"})]}),Object(S.jsx)(v.a,{}),Object(S.jsx)(C.a,{onChange:this.handleUsername,style:{padding:"10px",paddingBottom:"5px",paddingTop:"5px",fontSize:"16px"},placeholder:"Username"}),Object(S.jsx)(C.a,{onKeyPress:function(t){"Enter"===t.key&&e.loginUser()},type:"password",onChange:this.handlePassword,style:{padding:"10px",fontSize:"16px"},placeholder:"Password"}),Object(S.jsxs)("div",{style:{marginTop:"10px",textAlign:"center"},children:[Object(S.jsx)(w.a,{onClick:function(){return e.loginUser()},style:{padding:"10px",width:"50%",margin:"auto"},color:"green",children:"Login"}),Object(S.jsx)("p",{style:{marginTop:"5px",color:"red"},children:this.state.status})]}),Object(S.jsxs)("p",{style:{textAlign:"center",paddingTop:"10px",opacity:"50%",paddingBottom:"5px"},children:["to recieve an account, click ",Object(S.jsx)("a",{href:"mailto:maxjones2001@hotmail.com?subject=Request soil account",children:"here"}),"."]})]}),Object(S.jsx)("p",{style:{color:"white",textAlign:"center",opacity:"60%",padding:"3px"},children:Object(S.jsx)("a",{rel:"noreferrer",style:{color:"white",textAlign:"center",textDecoration:"none"},href:"https://maxwelljonesdesign.com/",target:"_blank",children:" maxwelljonesdesign.com"})})]})}},{key:"componentDidMount",value:function(){if(localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user"));this.setState({user:e})}}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[!this.state.user&&this.loginForm(),this.state.user&&Object(S.jsx)(T,{user:this.state.user})]})}}]),a}(r.a.Component);document.addEventListener("gesturestart",(function(e){e.preventDefault(),document.body.style.zoom=.99})),document.addEventListener("gesturechange",(function(e){e.preventDefault(),document.body.style.zoom=.99})),document.addEventListener("gestureend",(function(e){e.preventDefault(),document.body.style.zoom=.99}));var M=0;document.addEventListener("touchend",(function(e){var t=(new Date).getTime();t-M<=300&&e.preventDefault(),M=t}),!1),document.addEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),!1),document.body.classList.add("no-sroll");var F=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(S.jsx)("div",{id:"main",children:Object(S.jsx)(H,{})})}}]),a}(r.a.Component);a(154);s.a.render(Object(S.jsx)(F,{}),document.getElementById("root"))},89:function(e,t,a){}},[[155,1,2]]]);
//# sourceMappingURL=main.c55a4214.chunk.js.map