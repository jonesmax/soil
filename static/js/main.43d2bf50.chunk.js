(this.webpackJsonpsoil=this.webpackJsonpsoil||[]).push([[0],{112:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(33),i=a.n(s),o=(a(112),a(38)),c=a(39),l=a(50),d=a(48),h=a(29),u=a.n(h),g=(a(77),a(53)),p=a(79),j=a.n(p),b=a(95),x=(a(78),a(159)),y=a(36),m=a(160),f=a(161),O=a(156),v=a(157),w=a(141),k=a(4),D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={user:e.props,Loading:!1,status:"safe",gdpLevel:0,statusBar:null,location:null,currentReports:[],currentWeatherReports:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getWeather()}},{key:"getWeather",value:function(e){var t=this,a=this.props.user.location,r="http://api.openweathermap.org/data/2.5/weather?q="+(a+=", CA")+"&units=metric&appid=86583fb8344f78f0fdf02aa0d9e1859c";u.a.get(r).then((function(e){t.setState({Loading:!1,user:t.props.user,location:a}),t.createWeather(e.data)}))}},{key:"createWeather",value:function(e){var t={user_id:this.props.user.id,date:this.formatDate(new Date),high:e.main.temp_max,low:e.main.temp_min};u.a.post("http://3.137.214.252:80/weather/create",t).then((function(e){e.data?console.log("success"):console.log("already have that weather, or failed.")})),this.getData(this.props.user.id)}},{key:"getData",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var a=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.get("http://3.137.214.252:80/weather/"+t).then((function(e){e.data&&(a.setState({currentReports:e.data}),a.calculateWeather(e.data))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateWeather",value:function(e){console.log(e);var t=0;e.forEach((function(e){var a=t;a+=Math.floor((e.high+e.low)/2),console.log("current gdp",a),e.fertilized?(e.gdp=Math.floor((e.high+e.low)/2),e.status="rgb(205,205,205)",e.message="Safe",e.color="black"):a>=170?(e.gdp=a,e.status="red",e.message="Action",e.color="white"):a>=120?(e.gdp=a,e.status="rgb(209, 14, 0,0.5)",e.message="Warning",e.color="white"):a>=80?(e.gdp=a,e.status="yellow",e.message="Moderate",e.color="black"):(e.gdp=a,e.status="rgb(123, 237, 47)",e.message="Safe",e.color="black"),t=e.gdp})),this.setState({currentWeatherReports:e})}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),r=""+t.getDate(),n=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[n,a,r].join("-")}},{key:"getToday",value:function(){var e=new Date,t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate()<10?"0"+e.getDate():e.getDate(),r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=e.getFullYear();return(e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+(e.getHours()>12?" pm":" am")+" "+t+" "+a+" "+r+", "+n}},{key:"getDate",value:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(e=new Date(e)).getUTCDay()];return e.getUTCMonth()+1+"/"+(e.getUTCDate()<9?"0"+e.getUTCDate():e.getUTCDate())+" "+t}},{key:"status",value:function(e){var t=e[e.length-1];return Object(k.jsx)("div",{style:{backgroundColor:t.status,padding:"5px"},children:Object(k.jsx)("h2",{style:{textAlign:"center",color:"black"},children:t.message})})}},{key:"ferterlize",value:function(e){var t=this,a=e[e.length-1].id;u.a.get("http://3.137.214.252/weather/fertilize/"+a).then((function(e){e.data&&t.getData(t.props.user.id)}))}},{key:"tableBoard",value:function(e){var t=this;return e.map((function(e){return Object(k.jsxs)(x.a.Row,{color:"blue",children:[Object(k.jsx)(x.a.Cell,{id:"tbody",children:t.getDate(e.date)}),Object(k.jsx)(x.a.Cell,{id:"tbody",children:e.high}),Object(k.jsx)(x.a.Cell,{id:"tbody",children:e.low}),Object(k.jsxs)(x.a.Cell,{id:"tbody",style:{backgroundColor:e.status,color:e.color},children:[e.gdp,Object(k.jsx)(y.a,{style:{display:e.fertilized?null:"none"},color:"green",name:"star"})]})]},e.date)}))}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{style:{padding:"30px"},children:[Object(k.jsxs)(m.a,{style:{width:"100%",margin:"auto",padding:"10px",maxHeight:"90vh",maxWidth:"600px"},children:[Object(k.jsx)(f.a,{active:this.state.Loading,inverted:!0,children:Object(k.jsx)(O.a,{size:"medium",children:"Loading"})}),Object(k.jsxs)(m.a.Header,{children:[Object(k.jsx)("h1",{style:{fontSize:"15px",textAlign:"center"},children:this.getToday()}),this.state.weather&&Object(k.jsxs)("h2",{style:{fontSize:"15px",textAlign:"center"},children:[this.state.weather.main.temp,"\xb0 in ",this.state.location]})]}),Object(k.jsx)(v.a,{style:{marginBottom:"5px"}}),this.state.currentWeatherReports.length>0&&this.status(this.state.currentWeatherReports),Object(k.jsx)(v.a,{style:{marginTop:"5px"}}),Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:Object(k.jsxs)(x.a,{unstackable:!0,children:[Object(k.jsx)(x.a.Header,{color:"blue",children:Object(k.jsxs)(x.a.Row,{children:[Object(k.jsx)(x.a.HeaderCell,{id:"thc",children:"Date"}),Object(k.jsx)(x.a.HeaderCell,{id:"thc",children:"High"}),Object(k.jsx)(x.a.HeaderCell,{id:"thc",children:"Low"}),Object(k.jsx)(x.a.HeaderCell,{id:"thc",children:"GDP"})]})}),Object(k.jsx)(x.a.Body,{id:"tbody",children:this.state.currentWeatherReports&&this.tableBoard(this.state.currentWeatherReports)})]})}),Object(k.jsxs)(w.a.Group,{style:{width:"100%",padding:"10px",paddingBottom:"0px",marginTop:"2px"},children:[Object(k.jsx)(w.a,{style:{width:"50%"},color:"blue",children:"Fix"}),Object(k.jsx)(w.a,{onClick:function(){return e.ferterlize(e.state.currentWeatherReports)},style:{color:"black",width:"50%"},color:"green",children:"Fertilze"})]})]})]}),Object(k.jsx)("p",{style:{textAlign:"center",color:"white",padding:"5px"},children:Object(k.jsx)("a",{style:{color:"white",opacity:"50%"},href:"mailto:maxjones2001@hotmail.com?subject=Help",children:"Need help?"})})]})}}]),a}(n.a.Component),C=a(158),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={users:null,username:null,password:null,status:"No User"},e.handleUsername=e.handleUsername.bind(Object(g.a)(e)),e.handlePassword=e.handlePassword.bind(Object(g.a)(e)),e}return Object(c.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"loginUser",value:function(){var e=this,t={username:this.state.username,password:this.state.password};u.a.post("http://3.137.214.252/users/login",t).then((function(t){t.data?e.setState({status:"Success",user:t.data}):(console.log("no user found"),e.setState({status:"Not Succesful"}))}))}},{key:"loginForm",value:function(){var e=this;return Object(k.jsxs)("div",{style:{padding:"30px"},children:[Object(k.jsxs)(m.a,{style:{margin:"auto",padding:"10px"},children:[Object(k.jsx)(m.a.Header,{children:Object(k.jsx)("h1",{style:{textAlign:"center"},children:"Soil"})}),Object(k.jsx)(v.a,{}),Object(k.jsx)(C.a,{onChange:this.handleUsername,style:{padding:"10px",paddingBottom:"5px",paddingTop:"5px"},placeholder:"Username..."}),Object(k.jsx)(C.a,{onKeyPress:function(t){"Enter"===t.key&&e.loginUser()},type:"password",onChange:this.handlePassword,style:{padding:"10px"},placeholder:"Password..."}),Object(k.jsx)("div",{style:{marginTop:"10px",textAlign:"center"},children:Object(k.jsx)(w.a,{onClick:function(){return e.loginUser()},style:{padding:"10px",width:"50%",margin:"auto"},color:"green",children:"Login"})}),Object(k.jsxs)("p",{style:{textAlign:"center",paddingTop:"10px",opacity:"50%",paddingBottom:"5px"},children:["to recieve an account, click ",Object(k.jsx)("a",{href:"mailto:maxjones2001@hotmail.com?subject=Request soil account",children:"here"}),"."]})]}),Object(k.jsx)("p",{style:{color:"white",textAlign:"center",opacity:"60%",padding:"3px"},children:Object(k.jsx)("a",{rel:"noreferrer",style:{color:"white",textAlign:"center",textDecoration:"none"},href:"https://maxwelljonesdesign.com/",target:"_blank",children:" maxwelljonesdesign.com"})})]})}},{key:"render",value:function(){return Object(k.jsxs)("div",{children:[!this.state.user&&this.loginForm(),this.state.user&&Object(k.jsx)(D,{user:this.state.user})]})}}]),a}(n.a.Component),H=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(k.jsx)("div",{id:"main",children:Object(k.jsx)(S,{})})}}]),a}(n.a.Component);a(139);i.a.render(Object(k.jsx)(H,{}),document.getElementById("root"))},77:function(e,t,a){}},[[140,1,2]]]);
//# sourceMappingURL=main.43d2bf50.chunk.js.map